<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8" />
  <title>××œ××™ ××—×¡×Ÿ</title>
  <style>
    body { font-family: Arial; direction: rtl; padding: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background: #f0f0f0; }
    input, select, button { padding: 6px; margin: 4px; }
  </style>
</head>
<body>

<title>××œ××™ ××—×¡×Ÿ</title>


<h2>×”×•×¡×¤×” / ×¢×“×›×•×Ÿ ×—×•××¨</h2>
<input id="itemName" placeholder="×©× ×—×•××¨" />
<input id="location" placeholder="××™×§×•× (××“×£)" />
<input id="qty" type="number" placeholder="×›××•×ª" />
<select id="state">
  <option value="×—×“×©">×—×“×©</option>
  <option value="×¤×ª×•×—">×¤×ª×•×—</option>
</select>
<button onclick="addItem()">â• ×”×•×¡×£ / ×¢×“×›×Ÿ</button>

<h2>×”×•×¨×“×ª ×—×•××¨ ××”××œ××™</h2>
<input id="removeName" placeholder="×©× ×—×•××¨" />
<input id="removeQty" type="number" placeholder="×›××•×ª ×œ×”×•×¨×“×”" />
<select id="removeState">
  <option value="×¤×ª×•×—">×¤×ª×•×—</option>
  <option value="×—×“×©">×—×“×©</option>
</select>
<button onclick="removeItem()">â– ×”×•×¨×“ ××”××œ××™</button>

<h2>×—×™×¤×•×© ×—×•××¨</h2>
<input id="search" placeholder="×©× ×—×•××¨" />
<button onclick="searchItem()">ğŸ” ×—×¤×©</button>
<p id="result"></p>

<h2>×“×•×— ××œ××™</h2>
<button onclick="printReport()">ğŸ–¨ï¸ ×”×“×¤×¡ ×“×•×—</button>

<table id="table">
  <thead>
    <tr>
      <th>×©× ×—×•××¨</th>
      <th>××™×§×•×</th>
      <th>×›××•×ª ×—×“×©</th>
      <th>×›××•×ª ×¤×ª×•×—</th>
      <th>×¡×”×´×›</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
let inventory = JSON.parse(localStorage.getItem('inventory') || '{}');

function save() {
  localStorage.setItem('inventory', JSON.stringify(inventory));
}

function addItem() {
  const name = document.getElementById('itemName').value.trim();
  const location = document.getElementById('location').value.trim();
  const qty = Number(document.getElementById('qty').value);
  const state = document.getElementById('state').value;

  if (!name || !location || !Number.isFinite(qty) || qty <= 0) {
    alert('× × ×œ××œ× ×©× ×—×•××¨, ××™×§×•× ×•×›××•×ª ×ª×§×™× ×”');
    return;
  }

  if (!inventory[name]) {
    inventory[name] = { location, ×—×“×©: 0, ×¤×ª×•×—: 0 };
  }

  inventory[name].location = location;
  inventory[name][state] += qty;

  save();
  render();

  document.getElementById('itemName').value = '';
  document.getElementById('location').value = '';
  document.getElementById('qty').value = '';
}

function render() {
  const tbody = document.querySelector('#table tbody');
  tbody.innerHTML = '';
  for (const name in inventory) {
    const item = inventory[name];
    const total = item['×—×“×©'] + item['×¤×ª×•×—'];
    const tr = document.createElement('tr');
    tr.innerHTML = `<td>${name}</td><td>${item.location}</td><td>${item['×—×“×©']}</td><td>${item['×¤×ª×•×—']}</td><td>${total}</td>`;
    tbody.appendChild(tr);
  }
}

function removeItem() {
  const name = document.getElementById('removeName').value.trim();
  const qty = Number(document.getElementById('removeQty').value);
  const state = document.getElementById('removeState').value;

  if (!inventory[name]) {
    alert('×”×—×•××¨ ×œ× ×§×™×™× ×‘××œ××™');
    return;
  }
  if (!Number.isFinite(qty) || qty <= 0) {
    alert('×›××•×ª ×œ× ×ª×§×™× ×”');
    return;
  }
  if (inventory[name][state] < qty) {
    alert('××™×Ÿ ×›××•×ª ××¡×¤×§×ª ×œ×”×•×¨×“×”');
    return;
  }

  inventory[name][state] -= qty;
  save();
  render();

  document.getElementById('removeName').value = '';
  document.getElementById('removeQty').value = '';
}

function searchItem() {
  const q = document.getElementById('search').value.trim();
  if (inventory[q]) {
    const i = inventory[q];
    document.getElementById('result').innerText = `×§×™×™× ×‘××œ××™ | ××™×§×•×: ${i.location} | ×—×“×©: ${i['×—×“×©']} | ×¤×ª×•×—: ${i['×¤×ª×•×—']} | ×¡×”"×›: ${i['×—×“×©'] + i['×¤×ª×•×—']}`;
  } else {
    document.getElementById('result').innerText = '×œ× × ××¦× ×‘××œ××™';
  }
}

function printReport() {
  window.print();
}

render();
</script>

</body>
</html>
